---
title:  "TIL. 7월 2주차"
excerpt: "7월 2주차 TIL"

categories:
  - TIL
tags:
  - TIL
last_modified_at: 2020-07-06T21:56:00-0900
---
# 7월 6일 월요일
오늘은 회사에서 야근하고 11시에 퇴근해서 공부를 제대로 하지 못했다.  

1. (회사) 단순히 print만 하는 테스트 프로그램에서 전혀 엉뚱한 print가 찍히는 현상   
프로세스 데드 현상이 있어서 원인 분석하느라 디버깅을 했는데, print 하는 부분을 추가하면 데드 현상이 재현이 되지 않아서 테스트 프로그램을 작성 해 보았다.  
테스트 바이너리의 cpp 파일에서 `printf("a"\n);`만 있는 단순한 프로그램이었는데 전혀 엉뚱한 print가 찍히더라. 예를들면 a가 아니라 b라던가?  
너무 당황스러웠는데 .. 어찌저찌 원인을 찾았다. (하루종일 삽질했다 진짜)  
원인은 회사의 소스들이 라이브러리를 링크해서 사용하는데, 링크를 하는 순간 전역변수로 등록 되어 있던 클래스들이 선언되면서 생긴 문제였다. ( 링크가 걸린 순간 전역변수에 있는 것들이 선언된다고 한다. )  
클래스가 선언되고 그 클래스 내부 로컬 변수에 또 클래스가 선언되고 .. 꼬리에 꼬리를 물고 결국 엉뚱한 print까지 찾아가게 됐던 것이다.  
문제가 됐던 클래스를 사용하는 함수 내부로 옮겼는데.. 이게 원래는 쓰레드에서 클래스를 공유 할 때 쉽게 쓰려고 선언 해 놓은 것 같다. ( 지역 변수로 선언하면 Lock도 잡아야하고 복잡 해 진다고 한다. )  
어찌됐든 문제가 됐던 클래스는 공유 할 필요가 없다고 해서 지역변수로 옮겨서 이슈를 해결 했다.  
클래스를 설계 하면서 로컬 변수에 클래스를 생성한다고 했을 때도 내가 원하지 않는 상황에서 클래스들이 생성되면서 문제를 일으킬 수 있다는 것도 생각이 든다. 

2. 위의 이슈를 해결하고 집에와서 관성을 유지하기 위해서 조금이나마 HTML 태그 공부를 했다.
    - hyper link tag
    - table, list tag

3. 노래 연습도 하고 있는데 잘 안된다 ㅎㅎ
